/******************************************************/
/******************************************************/
/*                                                    */
/*  jQuery RoughDraft.js Plugin                       */
/*  Version 0.1.0                                     */
/*                                                    */
/*  Copyright Nick Dreckshage, licensed GPL & MIT     */
/*  https://github.com/ndreckshage/roughdraft.js      */
/*                                                    */
/******************************************************/
/******************************************************/

(function(e,t,n,r){e.RedPen=function(e){this._create(e);this._init()};e.RedPen.settings={author:"lebowskiipsum.com",thesaurus:"/roughdraft.thesaurus.json",illustrator:"placehold.it",calendar:{dayNumber:"j",dayNumberZeros:"d",dayText:"l",dayTextThree:"D",monthNumber:"n",monthNumberZeros:"m",monthText:"F",monthTextThree:"M",yearNumber:"Y",yearNumberTwo:"y"}};e.RedPen.scopeVar={dataTag:"data-",paragraphType:"p",sentenceType:"s",wordType:"w"};e.RedPen.prototype={_create:function(t){var n=e("[data-draft-repeat]");this.options=e.extend(true,{},e.RedPen.settings,t);this.scopeVar=e.RedPen.scopeVar;if(n.length){this.scanner(n)}},_init:function(){var t=e("[data-draft-text]"),n=e("[data-draft-image]"),r=e("[data-draft-date]");if(t.length){this.plagerizer(t)}if(n.length){this.doodler(n)}if(r.length){this.scheduler(r)}},scanner:function(t){var n,r="draft-repeat",i;for(var s=0;s<t.length;s++){n=e(t[s]);i=n.data(r);n.removeAttr(this.scopeVar.dataTag+r);for(var o=0;o<i-1;o++){n.clone(true,true).insertAfter(n)}}},plagerizer:function(t){var n,r="draft-text",i,s,o;for(var u=0;u<t.length;u++){n=e(t[u]);i=n.data(r);if(typeof i==="string"){i=i.split("/");s=parseInt(i[0]);o=i[1].toLowerCase();if(isNaN(s)||typeof o!=="string"){s=false;o=false}if(s&&o){n.removeAttr(this.scopeVar.dataTag+r);n.text(this._openToRandomPage(s,o))}else{console.log("Please ensure that you specify Paragraph/Sentence/Word in the format 3/S, for 3 sentences")}}}},doodler:function(t){var n,r="draft-image",i,s,o,u;for(var a=0;a<t.length;a++){n=e(t[a]);i=n.data(r);if(typeof i==="string"){i=i.split("/");s=parseInt(i[0]);o=parseInt(i[1]);if(isNaN(s)||isNaN(o)){s=false;o=false}if(s&&o){u=this._photoAlbum(s,o);n.attr("src",u).attr("width",s).attr("height",o).removeAttr(this.scopeVar.dataTag+r)}else{console.log("Please ensure that you specify Width/Height in the format 250/300 for 250px wide by 300px tall")}}}},scheduler:function(t){var n,r="draft-date",i,s,o=new String;for(var u=0;u<t.length;u++){n=e(t[u]);i=n.data(r);if(typeof i==="string"){i=i.split("/");dateDataLength=i.length;o="";for(var a=0;a<i.length;a++){o+=this._datePicker(i[a]);a!=i.length-1?o+=" ":""}n.text(o)}}},_randomizer:function(e){return Math.floor(Math.random()*e)},_thesaurus:function(){var t=false,n=this.options.author,r="lebowskiipsum.com",i="baconipsum.com";switch(n){case r:break;case i:break;default:n=r;break}e.ajax({url:this.options.thesaurus,dataType:"json",async:false,success:function(e){t=e}});if(t===false){console.log("There was an issue with the AJAX request in the _thesaurus method. "+"Please ensure that "+this.options.thesaurus+" is your correct relative path.")}else{return t[n]}},_openToRandomPage:function(e,t){var n=this._thesaurus(),r,i=new Array,s=new String;i=this._randomParagraph(e,t,n);r=i.length;switch(t){case this.scopeVar.paragraphType:s=i.join(" ");break;case this.scopeVar.sentenceType:s=this._randomSentence(e,i,r);break;case this.scopeVar.wordType:s=this._randomWord(e,i);break;default:break}return s},_randomParagraph:function(e,t,n){var r=n.length,i,s,o=new Array;if(t!=this.scopeVar.paragraphType){i=this._randomizer(r);o=n.splice(i,1)[0]}else{while(e>0){if(r<=0){n=this._thesaurus();r=n.length}i=this._randomizer(r);s=n.splice(i,1)[0];o=o.concat(s);r--;e--}}return o},_randomSentence:function(e,t,n){var r=e,i=this._randomizer(n),s=i+1,o,u=new String;while(e>0){if(e!=r){s++;if(s>=n){s=0}o=t[s]}else{o=t[i]}if(e<n){o=o+" "}u+=o;e--}return u},_randomWord:function(e,t){var n=t.join(" ").split(" "),r=t.length,i=this._randomizer(r),s,o=new String;while(e>0){if(i>=r){i=0}s=n[i];if(e<r){s+=" "}o+=s;i++;e--}return o},_photoAlbum:function(e,t){var n=false,r=this.options.illustrator,i="placehold.it",s="placekitten.com",o,u;switch(r){case i:break;case s:break;default:r=i;break}o=this._waterColor(r);if(r==s){u="http://placekitten.com/"+o+e+"/"+t}else{u="http://placehold.it/"+e+"x"+t+o}return u},_waterColor:function(e){var t=new Array,n="placekitten.com",r;if(e==n){t=[false,"g"]}else{t=["453f35","e7cead","b5ab94","eba434","64886c","b15c3a","b1956c"]}r=t.length;r=this._randomizer(r);r=t[r];if(r){if(e==n){r=r+"/"}else{r="/"+r+"/fff"}}else{r=""}return r},_datePicker:function(e){var t=this.options.calendar,n=new Date,r=false;if(e.split("-").length>1){e=e.split("-");if(e[1].toLowerCase()=="r"){r=true}e=e[0]}if(e==t.dayNumberZeros||e==t.dayTextThree||e==t.dayNumber||e==t.dayText){if(e==t.dayTextThree||e==t.dayText||e==t.dayTextThree){n=n.getDay();if(r===true){n=this._randomizer(6)}switch(n){case 0:n="Sunday";break;case 1:n="Monday";break;case 2:n="Tuesday";break;case 3:n="Wednesday";break;case 4:n="Thursday";break;case 5:n="Friday";break;case 6:n="Saturday";break;default:break}if(e==t.dayTextThree){n=n.substr(0,3)}}else{n=n.getDate();if(r===true){n=this._randomizer(28)+1}if(e==t.dayNumberZeros&&n<10){n="0"+n.toString()}}}else if(e==t.monthNumberZeros||e==t.monthTextThree||e==t.monthText||e==t.monthNumber){n=n.getMonth();if(r===true){n=this._randomizer(12)}if(e==t.monthText||e==t.monthTextThree){switch(n){case 0:n="January";break;case 1:n="February";break;case 2:n="March";break;case 3:n="April";break;case 4:n="May";break;case 5:n="June";break;case 6:n="July";break;case 7:n="August";break;case 8:n="September";break;case 9:n="October";break;case 10:n="November";break;case 11:n="December";break;default:break}if(e==t.monthTextThree){n=n.substr(0,3)}}else if(e==t.monthNumberZeros){n="0"+(n+1).toString()}else{n+=1}}else{n=n.getFullYear();if(r===true){n=this._randomizer(25);n<10?n="0"+n.toString():n=n.toString();n="20"+n}if(e==t.yearNumberTwo){n=n.toString().substr(2,3)}}return n}};e.fn.roughDraft=function(t){return this.each(function(){e.data(this,"roughdraft",new e.RedPen(t,this))})}})(jQuery,window,document);